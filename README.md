# Конфигурационное управление
## Вариант 21
### Задание 2
Разработать инструмент командной строки для визуализации графа 
зависимостей, включая транзитивные зависимости. Сторонние средства для 
получения зависимостей использовать нельзя.
Зависимости определяются по имени пакета языка JavaScript (npm). Для 
описания графа зависимостей используется представление Graphviz. 
Визуализатор должен выводить результат на экран в виде кода.
Конфигурационный файл имеет формат json и содержит:

• Путь к программе для визуализации графов.

• Имя анализируемого пакета.

• Путь к файлу-результату в виде кода.

• URL-адрес репозитория.

### Описание

В приведенном вами коде реализуется сбор зависимостей для NPM-пакета с использованием API

для получения данных о пакетах, а затем генерируется граф в формате Graphviz.

Этот код предназначен для визуализации графа зависимостей коммитов JavaScript. 

Он использует конфигурационный файл для указания путей к репозиторию, визуализатору Graphviz и выходному изображению. 

С помощью Graphviz и информации о коммитах и их родителях, код генерирует граф зависимостей в формате изображения.

Создайте файл `config.json` в корневой директории проекта и укажите следующие параметры:

```json
    "graphviz_path": путь к Graphviz
    "package_name": имя пакета
    "path_to_result_file": файл в котором будет сохранен код
    "repository_url": url репозитория
```

## Методы

**`build_graphviz_code(dict_of_deps)`**

Принимает словарь зависимостей пакетов.

Формирует и возвращает строку в формате Graphviz, описывающую зависимости пакетов в виде графа.

**`get_npm_dependencies(pkg_name, repository_url`**

Получает данные о пакете с указанного URL репозитория (например, NPM).

Возвращает словарь зависимостей для последней версии указанного пакета.

Основные шаги:
```
    Формирует URL для запроса пакета.
    Выполняет HTTP-запрос к этому URL.
    Парсит JSON-ответ и извлекает зависимости последней версии.
```
Обрабатывает ошибки сети и разбора JSON.

**`resolve_dependencies(pkg_name, dict_of_deps, registry_url)`**

Рекурсивно собирает зависимости пакета и всех его подзависимостей.
Аргументы:

pkg_name: имя пакета.

dict_of_deps: уже собранные зависимости (избегает повторного запроса).

registry_url: URL репозитория пакетов.

Возвращает обновленный словарь зависимостей.

**`write_to_file(file_path, code_of_deps)`**

Сохраняет сгенерированный Graphviz код в указанный файл.

Обрабатывает ошибки записи файлов.

**`main()`**

Основная точка входа программы.
Выполняет следующие шаги:

Загружает конфигурацию из файла config.json.

Настройки включают: путь к файлу Graphviz, имя пакета, путь к выходному файлу и URL репозитория.

Получает зависимости указанного пакета с помощью resolve_dependencies.

Генерирует код в формате Graphviz с помощью build_graphviz_code.

Выводит результат в консоль и записывает его в файл.

## Результаты тестирования
Вывод кода графа в консоль:

![image](https://github.com/user-attachments/assets/df8e28f7-9085-4f51-9cfe-4785e30e8756)

Код зависимостей:

![image](https://github.com/user-attachments/assets/b6b19ba4-34a6-4a81-8eef-a22e2810f6f6)

Граф зависимостей:

![graphviz (1)](https://github.com/user-attachments/assets/bb6e4b84-69b2-4a9e-9a2f-47fc2e479408)

Тесты программы:

![image](https://github.com/user-attachments/assets/d978dea9-e429-4ba6-9864-d5dfa7e0a5b6)
